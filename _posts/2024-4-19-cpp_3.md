---
layout: article
title: C++ 预编译
key: 100003
tags: C++ 预编译
category: blog
date: 2024-04-19 15:20:13 +08:00
mermaid: true
---

  | 关键词 |
  |---|
  | #include<> 和 #include "" |
  | #define #undef |
  | #ifdef, #ifndef, #if, #elif, #else, #endif |
  | #pragma once |
  | #error |
  | #defined |
  | #warning |


### #include<> 和 #include ""

  * <>特点：标准库文件所在目录，编译器设置的include路径内（Linux：/usr/include，Windows：C:\Program Files\Microsoft Visual Studio\2022\VC\Tools\MSVC\<version>\include\）
  * ""特点：先从当前源文件所在目录找，找不到再去标准库目录找，因此可以设置与标准库同名的函数

### #define #undef
 #define：定义一个宏。宏可以是无参数的（称为对象式宏）或带参数的（称为函数式宏）

 ```c++
 #define PI 3.14159  
 #define MAX(a, b) ((a) > (b) ? (a) : (b))
 #undef PI
 ```

### #ifdef, #ifndef, #if, #elif, #else, #endif
 #ifdef, #ifndef, #if, #elif, #else, #endif：这些指令用于条件编译。它们允许你根据某些条件包含或排除代码块。

 ```c++
 #ifdef DEBUG  
    // 调试代码  
 #endif  
  
 #if SOME_CONDITION  
    // 一些条件代码  
 #elif SOME_OTHER_CONDITION  
    // 另一个条件代码  
 #else  
    // 默认代码  
 #endif
 ```

 ### #pragma once 

  确保包含#progma once的文件只会被包含一次

  并不是c++标准的一部分。因此，如果需要在所有编译器上都能正确编译，需要确保可移植性，那么使用传统的 #ifndef/#define/#endif 方法更稳妥

```c++
// my_class.h  
  
#pragma once  
  
class MyClass {  
public:  
    MyClass();  
    ~MyClass();  
    void doSomething();  
};

// main.cpp  
  
#include "my_class.h" // 无论包含my_class.h多少次，只会包含一次 
  
int main() {  
    MyClass obj;  
    obj.doSomething();  
    return 0;  
}
```


### #error

生成一个编译时错误，通常用于在编译时检查某些条件是否满足。

```c++
#if !defined(SOME_FEATURE)  
#error "SOME_FEATURE is not defined!"  
#endif
```

### #defined

#defined是一个预处理运算符，它用于检查一个宏是否已经被定义。这在条件编译中非常有用，允许你根据宏的定义状态来包含或排除代码块。

```c++

#if defined(MY_MACRO)  
    // 代码块仅当MY_MACRO被定义时执行  
#endif
```


### #warning

#warning 这个预处理指令用于在编译时生成警告消息。它通常用于提醒开发者注意某些潜在的问题或即将发生的变化。

```c++
#warning "This code is deprecated and will be removed in a future version."
```
