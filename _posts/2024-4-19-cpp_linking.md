---
layout: article
title: C++ 链接
key: 100003
tags: C++ 链接
category: blog
date: 2024-04-19 15:20:13 +08:00
mermaid: true
---

### extern 链接

在链接阶段，链接器会负责将所有目标文件中的符号进行整合，并找到 extern 声明所引用的符号的定义。具体来说，链接器会执行以下操作：

 * 符号解析： 链接器会解析所有目标文件中的符号，并建立符号表。
 * 符号引用检查： 链接器会检查每个符号的引用是否合法，例如确保每个符号都被定义或声明过。
 * 符号地址分配： 链接器会为每个符号分配一个内存地址。
 * 目标文件生成： 链接器会将所有目标文件整合为一个可执行文件。

例如，假设有两个目标文件 A.o 和 B.o，其中 A.o 中包含 extern int i; 声明，B.o 中包含 int i = 10; 定义。在链接阶段，链接器会将这两个目标文件整合为一个可执行文件。首先，链接器会解析 A.o 和 B.o 中的符号，并建立符号表。然后，链接器会检查符号 i 的引用是否合法，发现 i 在 A.o 中被声明，在 B.o 中被定义，因此引用合法。最后，链接器会为符号 i 分配一个内存地址，并生成可执行文件。

